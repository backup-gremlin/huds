/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /gh/willmyethewebsiteguy/popup@5.0.23/popup-javascript.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class Popup{static emitEvent(e,t={},o=document){if(!e)return;let i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return o.dispatchEvent(i)}constructor(){const e=this;this.userSettings=window.wmPopupSettings||{},this.popups={},this.popupTriggers=[],this.isOpen=!1,this.triggerSelector=this.userSettings.triggerSelector||'a[href*="#wm-popup"], a[href*="#wmpopup"]',this.initialized,this.preload=!0,this.runScripts=!0,this.scripts=[],this.animation="none",this.beforeOpen=()=>{},this.squarespace={loadSiteBundle:!0,get links(){return document.querySelectorAll(e.triggerSelector)}},this.hasGallerySection=!1,this.hasListSection=!1,this.hasVideo=!1,this.hasBkgVideo=!1,this.init(),this.ready}async init(){if(this.squarespace.links){Popup.emitEvent("wmPopup:beforeInit"),this.setSquarespaceLinks(),document.body.addEventListener("click",(e=>{let t=this.triggerSelector+=", [data-wm-popup]",o=e.target.closest(t);o&&(e.stopPropagation(),e.preventDefault(),this.open(o)),e.target.closest("[data-popup-close]")&&(e.stopPropagation(),e.preventDefault(),this.close())})),await this.buildPopups(),await this.loadScripts();for(let e in this.popups){let t=this.popups[e].popup;this.initializeBlocks(t)}this.rearrangePopups(),this.close(),Popup.emitEvent("wmPopup:ready"),this.ready=!0}}open(e){let t=e.dataset.wmPopup,o=this.popups[t];if(!o&&!e.dataset.popupContent)return;if(this.freezeScroll(),document.body.classList.add("wm-popup-open"),e.dataset.popupContent){this.popups[t]={content:e.dataset.popupContent,singleBlock:{},id:t},this.buildPopup(t);let i=document.querySelector("#siteWrapper");o=this.popups[t],i.append(o.popup)}Popup.emitEvent("wmPopup:beforeOpen",o),this.openPopup=this.popups[t],this.openPopup.trigger=e;let i=o.popup,s=e.dataset.wmPopupBlock;s&&this.placeSingleBlock(o,s),i.classList.add("open"),this.setFocusOnFirstElement(i),this.checkIfVideoAutoplay(),window.dispatchEvent(new Event("resize")),Popup.emitEvent("wmPopup:afterOpen",o)}close(){if(!this.openPopup)return;let e=this.openPopup.popup;Popup.emitEvent("wmPopup:beforeClose",e);let t=e.querySelector(".wm-popup-wrapper");if(e.querySelector("video")&&e.querySelectorAll("video").forEach((e=>e.pause())),e.querySelector('.sqs-block-video iframe[src*="autoplay=1"]')){const t=e.querySelector('.sqs-block-video iframe[src*="autoplay=1"]');t.src=t.src.replace("autoplay=1","")}this.resetNonNativeVideoBlocks();((e,t)=>{const o=window.getComputedStyle(e);if(parseFloat(o.transitionDuration)>0){const o=function(i){i.target===e&&(t(),e.removeEventListener("transitionend",o))};e.addEventListener("transitionend",o)}else t()})(t,(()=>{this.openPopup&&(this.openPopup.singleBlock?.block&&(this.returnSingleBlock(this.openPopup),this.openPopup.singleBlock={}),e.classList.remove("single-block-only"),this.openPopup.trigger.focus(),this.openPopup=null)})),document.body.classList.remove("wm-popup-open"),e.classList.remove("open"),this.unfreezeScroll(),Popup.emitEvent("wmPopup:afterClose",e)}buildPopup(e){let t=this.popups[e],o=document.querySelector("#sections > .page-section:last-of-type .content-wrapper");t.popup=document.createElement("div"),t.popup.dataset.popupId=e,t.popup.classList.add("wm-popup-container"),t.popup.setAttribute("aria-hidden",!0),t.popup.innerHTML=`\n        <div tabindex="-1" data-popup-close class="wm-popup-background"></div>\n        <div role="dialog" aria-modal="true" class="wm-popup-wrapper">\n          <button aria-label="Close popup" data-popup-close class="wm-popup-close-btn">\n            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">\n              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />\n            </svg>\n          </button>\n          <div class="wm-popup-content">\n            ${t.content}\n          </div>\n        </div>`,o.append(t.popup),this.animation=this.getPropertyValue(t.popup,"--animation")||"none",t.popup.dataset.animation=this.animation}async buildPopups(){this.popupTriggers=document.querySelectorAll("[data-wm-popup]");for(let e of this.popupTriggers){let t=e.dataset.wmPopup;if(this.popups[t])continue;let o=window.location.origin,i=null,s=e.dataset.popupContent;t.includes("/")&&(i=new URL(o+t).pathname),this.popups[t]={url:i,loaded:!1,content:s,id:t,popup:null}}const e=[];for(const t in this.popups){const o=this.popups[t].url;o&&e.push(o)}const t=e.map((e=>fetch(e).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e})).catch((t=>(console.error(`Failed to fetch ${e}:`,t),null)))));try{const o=(await Promise.all(t)).map((async(t,o)=>{if(null===t)return console.log(`Skipping processing for failed request: ${e[o]}`),{url:e[o],text:!1};try{const e=await t.text();return{url:new URL(t.url).pathname,text:e}}catch(e){return console.error(`Error processing response for ${t.url}:`,e),{url:new URL(t.url).pathname,text:!1}}}));(await Promise.all(o)).forEach((e=>{if(!e)return void console.log("Skipping null response");const t=new DOMParser;if(e.text){const o=t.parseFromString(e.text,"text/html").querySelector("#sections");o?(this.popups[e.url].content=o.innerHTML,o.querySelector(".user-items-list")&&(this.hasListSection=!0),o.querySelector(".sqs-block-video")&&(this.hasVideo=!0),o.querySelector(".gallery-section")&&(this.hasGallerySection=!0),o.querySelector(".sqs-video-background-native, .section-background #player")&&(this.hasBkgVideo=!0)):(console.warn(`No #sections found in the response for ${e.url}`),this.popups[e.url].content=`<section class="page-section error-section"><div class="content-wrapper"><p>No content found for ${e.url}</p></div></section>`)}else this.popups[e.url].content=`<section class="page-section error-section">\n            <div class="section-border"></div>\n            <div class="content-wrapper">\n              <p>The URL, <code>${e.url}</code>, does not exist on your website.</p>\n            </div>\n          </section>`}))}catch(e){console.error("An error occurred during fetch operations:",e)}for(let e in this.popups)this.buildPopup(e)}setSquarespaceLinks(){this.squarespace.links.forEach((e=>{let t,o=new URL(location.origin+e.getAttribute("href")),i=o.hash,s=o.href.split("=")[1];s.includes("#")&&(s=s.split("#")[0],t=i.split("#")[2]||null),e.setAttribute("data-wm-popup",s||window.location.pathname),t&&e.setAttribute("data-wm-popup-block","#"+t)})),Popup.emitEvent("wmPopup:afterTriggersSet")}async loadScripts(){if(!this.runScripts)return;const hasLoaded=new Set;if(this.squarespace.loadSiteBundle&&(this.hasGallerySection||this.hasListSection||this.hasVideo||this.hasBkgVideo)){this.flexAnimationWorkAround();let e=document.querySelector('body > [src*="https://static1.squarespace.com/static/vta"]');this.scripts.push(e)}document.querySelectorAll("script[data-popup-loaded], .wm-popup-container script").forEach((e=>{this.scripts.push(e)}));const scriptPromises=this.scripts.map((async el=>{if(hasLoaded.has(el.src)||el.innerHTML&&hasLoaded.has(el.innerHTML)||"application/json"===el.type)return;const script=document.createElement("script");script.src=el.src||el.dataset.popupScript,script.async=el.async,el.innerHTML?(eval(el.innerHTML),hasLoaded.add(el.innerHTML)):(await new Promise(((e,t)=>{script.onload=e,script.onerror=t,document.body.appendChild(script)})),hasLoaded.add(el.src))}));await Promise.all(scriptPromises)}initializeBlocks(e){window.Squarespace?.initializeLayoutBlocks(Y,Y.one(e)),window.Squarespace?.initializeNativeVideo(Y,Y.one(e)),window.Squarespace?.initializeWebsiteComponent(Y,Y.one(e)),this.initializeCommerce(e)}initializeCommerce(e){const t=e.querySelectorAll(".sqs-add-to-cart-button");if(!(t.length>0))return;const o=document.querySelectorAll('[data-afterpay="true"]'),i=window.Static?.SQUARESPACE_CONTEXT,s=i?.websiteSettings?.storeSettings?.merchandisingSettings?.displayNativeProductReviewsEnabled;t.forEach((e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)})),o.forEach((e=>e.removeAttribute("data-afterpay"))),i?.websiteSettings?.storeSettings?.merchandisingSettings&&(i.websiteSettings.storeSettings.merchandisingSettings.displayNativeProductReviewsEnabled=!1),"undefined"!=typeof Y&&Y.Squarespace&&Y.Squarespace.Commerce?Y.Squarespace.Commerce.initializeCommerce():console.warn("Squarespace Commerce object not found. Commerce initialization skipped."),o.forEach((e=>e.setAttribute("data-afterpay","true"))),i?.websiteSettings?.storeSettings?.merchandisingSettings&&(i.websiteSettings.storeSettings.merchandisingSettings.displayNativeProductReviewsEnabled=s)}rearrangePopups(){let e=document.querySelector("#siteWrapper");for(let t in this.popups){let o=this.popups[t].popup;e.append(o)}}placeSingleBlock(e,t){let o=e.popup.querySelector(t),i=o.matches(".sqs-block-video");o.matches(".sqs-block-image");if(e.singleBlock={block:o,originalParent:o.parentElement,nextSibling:o.nextElementSibling},i){let e=o.querySelector("video");e&&(e.muted=!1)}e.popup.querySelector(".page-section .content-wrapper").append(o),e.popup.classList.add("single-block-only")}returnSingleBlock(e){let t=e.singleBlock;const o=t?.block,i=t?.originalParent,s=t?.originalNextSibling;s?i.insertBefore(o,s):i.appendChild(o)}getPropertyValue(e,t){let o=window.getComputedStyle(e).getPropertyValue(t).trim().toLowerCase(),i=o;return(o.charAt(0).includes('"')||o.charAt(0).includes("'"))&&(i=i.substring(1)),(o.charAt(o.length-1).includes('"')||o.charAt(o.length-1).includes("'"))&&(i=i.slice(0,-1)),"true"==i&&(i=!0),"false"==i&&(i=!1),i}setFocusOnFirstElement(e){window.setTimeout((()=>{const t=e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t&&t.focus()}),100)}freezeScroll(){const e=window.scrollY,t=document.body;t.style.position="fixed",t.style.top=`-${e}px`}unfreezeScroll(){const e=document.body,t=e.style.top;e.style.position="",e.style.top="",window.scrollTo({top:-1*parseInt(t||"0"),left:0,behavior:"instant"})}checkIfVideoAutoplay(){let e=this.openPopup.popup.querySelector(".sqs-native-video[data-config-settings]");if(e){let t=e.querySelector("video"),o=JSON.parse(e.dataset.configSettings);if(!o)return;o.autoPlay&&(t.play(),t.currentTime=0)}}resetNonNativeVideoBlocks(){this.openPopup.popup.querySelector(".sqs-block-video iframe")&&this.initializeBlocks(this.openPopup.popup)}flexAnimationWorkAround(){function e(){Array.from(document.querySelectorAll(".animation-segment-parent-hidden")).map((e=>({element:e,clone:e.cloneNode(!0),parent:e.parentNode,sibling:e.previousElementSibling}))).forEach((e=>{e.element.parentNode.removeChild(e.element),e.clone.classList.remove("animation-segment-parent-hidden"),e.sibling?e.parent.insertBefore(e.clone,e.sibling.nextElementSibling):e.parent.insertBefore(e.clone,e.parent.firstElementChild)}))}"loading"===document.readyState?window.addEventListener("load",(()=>{window.top===window.self?e():window.Squarespace.onInitialize(Y,(function(){window.setTimeout(e,200)}))})):e()}}let wmPopups=new Popup;
//# sourceMappingURL=/sm/e0839beed550e96bfd05ef1c3616cf72f7bcae72948d29ab11640c804ae9f4e3.map